# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 500 –ø—Ä–∏ OAuth –∑–∞–ø—Ä–æ—Å–∞—Ö

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ GigaChat API –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:
```
POST http://localhost:8080/api/gigachat-oauth/api/v2/oauth 500 (Internal Server Error)
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### **1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Authorization Key (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–°–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ GigaChat, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Authorization Key** –≤–º–µ—Å—Ç–æ Client ID + Secret.

#### –®–∞–≥–∏:

1. **–ü–æ–ª—É—á–∏—Ç–µ Authorization Key:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ [–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç GigaChat API](https://developers.sber.ru/gigachat)
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç
   - –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ API"**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á"**
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Authorization Key** (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

2. **–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:**
   ```env
   VITE_GIGACHAT_AUTH_KEY=–≤–∞—à_authorization_key_–∑–¥–µ—Å—å
   ```
   
   **–í–∞–∂–Ω–æ:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å `Basic ` - –æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   npm run dev
   ```

### **2. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥: Client ID + Secret**

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å Client ID –∏ Client Secret:

1. **–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:**
   ```env
   VITE_GIGACHAT_CLIENT_ID=–≤–∞—à_client_id
   VITE_GIGACHAT_CLIENT_SECRET=–≤–∞—à_client_secret
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä**

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤**

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞, Vite proxy –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:
```
Proxying OAuth request to: /api/v2/oauth
OAuth response status: 200
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–∞ –≤ `.env`
- –õ–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`

## üìã –§–æ—Ä–º–∞—Ç –∫–ª—é—á–µ–π

### Authorization Key:
```
VITE_GIGACHAT_AUTH_KEY=your_authorization_key_without_basic_prefix
```
**–ù–µ –≤–∫–ª—é—á–∞–π—Ç–µ** —Å–ª–æ–≤–æ "Basic" –∏–ª–∏ –ø—Ä–æ–±–µ–ª—ã - –∫–æ–¥ –¥–æ–±–∞–≤–∏—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### Client ID + Secret:
```
VITE_GIGACHAT_CLIENT_ID=your_client_id
VITE_GIGACHAT_CLIENT_SECRET=your_client_secret
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç** - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–æ–±–µ–ª–æ–≤ –≤–æ–∫—Ä—É–≥ `=`
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| 401 Unauthorized | –ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Authorization Key –∏–ª–∏ Client ID/Secret |
| 500 Internal Server Error | –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–æ–∫—Å–∏ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vite dev —Å–µ—Ä–≤–µ—Ä–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä |
| NO_CREDENTIALS | –ö–ª—é—á–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `.env` —Ñ–∞–π–ª–∞ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö |

## üöÄ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

1. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Authorization Key** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –º–µ—Ç–æ–¥
2. ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
3. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∫—Å–∏
4. ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - Client ID + Secret –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞—é—Ç

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è GigaChat API](https://developers.sber.ru/gigachat)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Backend Proxy](BACKEND_SETUP.md) - –¥–ª—è production
- [–†–µ—à–µ–Ω–∏–µ CORS –ø—Ä–æ–±–ª–µ–º](CORS_EXPLANATION.md)

---

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç.
