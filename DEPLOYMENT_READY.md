# üöÄ –ì–û–¢–û–í–û –ö –î–ï–ü–õ–û–Æ!

## ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã

**–î–∞—Ç–∞:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production –¥–µ–ø–ª–æ—é

---

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. ‚úÖ **YooKassa –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ø–ª–∞—Ç–µ–∂–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
2. ‚úÖ **Backend API** - –≤—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - PostgreSQL –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
5. ‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–π endpoint** - –∑–∞—â–∏—â–µ–Ω –æ—Ç production
6. ‚úÖ **CORS** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
7. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - JWT, HTTP-only cookies

---

## üìã –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —à–∞–≥–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### 1. ‚ö†Ô∏è YooKassa - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –†–ï–ê–õ–¨–ù–´–ï –∫–ª—é—á–∏

**–í–ê–ñ–ù–û:** –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –†–ï–ê–õ–¨–ù–´–ï –∫–ª—é—á–∏ –æ—Ç YooKassa!

**–¢–µ–∫—É—â–∏–µ (—Ç–µ—Å—Ç–æ–≤—ã–µ):**
```env
YOOKASSA_SHOP_ID=1202294
YOOKASSA_SECRET_KEY=test_Op_JMsiT_...
```

**–ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞:**
```env
YOOKASSA_SHOP_ID=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_shop_id
YOOKASSA_SECRET_KEY=live_–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_–∫–ª—é—á  # –ë–ï–ó test_ –ø—Ä–µ—Ñ–∏–∫—Å–∞!
```

**–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:**
1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç YooKassa
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–ö–ª—é—á–∏ API"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Production** –∫–ª—é—á–∏ (–Ω–µ —Ç–µ—Å—Ç–æ–≤—ã–µ!)

### 2. ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook –≤ YooKassa

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è backend, –¥–æ–±–∞–≤—å—Ç–µ webhook URL –≤ YooKassa:
```
https://–≤–∞—à-backend-url.onrender.com/api/payments/webhook
```

**–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**
1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç YooKassa
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
3. –î–æ–±–∞–≤—å—Ç–µ URL –≤–∞—à–µ–≥–æ backend + `/api/payments/webhook`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### 3. ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Backend

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:**
```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://user:password@host:port/database

# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
AUTH_JWT_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞

# YooKassa (–†–ï–ê–õ–¨–ù–´–ï –∫–ª—é—á–∏!)
YOOKASSA_SHOP_ID=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_shop_id
YOOKASSA_SECRET_KEY=live_–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_–∫–ª—é—á

# URLs
FRONTEND_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com
PAYMENT_RETURN_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com/payment/success
PAYMENT_FAIL_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com/payment/failed

# CORS
ALLOWED_ORIGINS=https://–≤–∞—à-–¥–æ–º–µ–Ω.com
```

### 4. ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Frontend

```env
# Backend URL
VITE_BACKEND_URL=https://–≤–∞—à-backend-url.onrender.com

# Telegram Bot
VITE_TELEGRAM_BOT_USERNAME=–≤–∞—à_–±–æ—Ç_username
```

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

### Backend (Render/Heroku)

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ:**
   - Build Command: `cd backend && npm install`
   - Start Command: `cd backend && npm start`
   - Root Directory: `backend`
3. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (—Å–º. –≤—ã—à–µ)
4. **Deploy**

### Frontend (Vercel/Netlify)

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ:**
   - Build Command: `npm run build`
   - Output Directory: `dist`
3. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (—Å–º. –≤—ã—à–µ)
4. **Deploy**

---

## ‚úÖ –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è - –ø—Ä–æ–≤–µ—Ä–∫–∞

1. [ ] Backend –¥–æ—Å—Ç—É–ø–µ–Ω: `https://–≤–∞—à-backend-url/health`
2. [ ] Frontend –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
3. [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç
4. [ ] –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
5. [ ] Webhook –æ—Ç YooKassa –ø–æ–ª—É—á–∞–µ—Ç—Å—è (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏)

---

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–µ—Å—Ç–æ–≤—ã–π endpoint** `/api/test/auth` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω –≤ production
2. **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã** (`create-test-user.js`, `test-payment.js`) –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ production (–≤ .gitignore)
3. **HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** - –≤—Å–µ URL –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å HTTPS
4. **CORS** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `ALLOWED_ORIGINS` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞—à production –¥–æ–º–µ–Ω

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤—ã—à–µ, –º–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å. –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ production! üöÄ

