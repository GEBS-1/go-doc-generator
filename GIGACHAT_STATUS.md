# üîç –°—Ç–∞—Ç—É—Å GigaChat API

## ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞**

**–§–∞–π–ª**: `.env`  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

```env
VITE_GIGACHAT_CLIENT_ID=e6b01f52-4f2a-4702-a5d1-b0c6d5c3b386
VITE_GIGACHAT_CLIENT_SECRET=ceb594ee-1699-4d2c-8c15-0e50f9b4158f
```

**–§–æ—Ä–º–∞—Ç**: ‚úÖ UUID (–≤–∞–ª–∏–¥–Ω—ã–π)  
**–î–ª–∏–Ω–∞**: ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è

---

## üîß **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**

### **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
- ‚úÖ OAuth 2.0 —á–µ—Ä–µ–∑ Basic Auth
- ‚úÖ –¢–æ–∫–µ–Ω –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 30 –º–∏–Ω—É—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏
- ‚úÖ Retry –ø—Ä–∏ 401 –æ—à–∏–±–∫–∞—Ö

### **Endpoints**
```
OAuth:  https://ngw.devices.sberbank.ru:9443/api/v2/oauth
API:    https://gigachat.devices.sberbank.ru/api/v1/chat/completions
```

### **–¢–∞–π–º–∞—É—Ç—ã**
- ‚úÖ OAuth: 10 —Å–µ–∫—É–Ω–¥
- ‚úÖ API: 60 —Å–µ–∫—É–Ω–¥

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
–ö–ª–∞—Å—Å `GigaChatError` —Å –∫–æ–¥–∞–º–∏:
- `NO_CREDENTIALS` - –Ω–µ—Ç credentials
- `INVALID_CREDENTIALS` - –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `NETWORK_ERROR` - –ø—Ä–æ–±–ª–µ–º—ã —Å–µ—Ç–∏
- `TIMEOUT_ERROR` - –ø—Ä–µ–≤—ã—à–µ–Ω —Ç–∞–π–º–∞—É—Ç
- `API_ERROR` - –æ—à–∏–±–∫–∞ API
- `NO_RESPONSE` - –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞
- `PARSE_ERROR` - –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
- `JSON_PARSE_ERROR` - –æ—à–∏–±–∫–∞ JSON

---

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**
- ‚úÖ Build —É—Å–ø–µ—à–µ–Ω: `npm run build`
- ‚úÖ –ö–æ–¥ –≤–∞–ª–∏–¥–Ω—ã–π: 0 TypeScript/ESLint –æ—à–∏–±–æ–∫
- ‚úÖ Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç: demo —Ä–µ–∂–∏–º –±–µ–∑ API

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ credentials**
–ó–∞–ø—É—Å—Ç–∏—Ç–µ: `node check-env.cjs`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ Credentials –Ω–∞–π–¥–µ–Ω—ã –∏ –≤–∞–ª–∏–¥–Ω—ã

---

## ‚ö†Ô∏è **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**

### **1. CORS**
**–ü—Ä–æ–±–ª–µ–º–∞**: –í production –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–∏–º API.

**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å API –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ backend:
```javascript
// ‚ùå –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production
fetch('https://gigachat.devices.sberbank.ru/api/v1/...')

// ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞
fetch('/api/gigachat/completions')  // -> –≤–∞—à backend
```

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ development

### **2. Rate Limiting**
**–ü—Ä–æ–±–ª–µ–º–∞**: GigaChat –º–æ–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏, caching.

### **3. –ù–µ–≤–µ—Ä–Ω—ã–µ credentials**
**–ü—Ä–æ–±–ª–µ–º–∞**: Client ID/Secret –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏.

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ developers.sber.ru/gigachat

### **4. –ö–æ–¥–∏—Ä–æ–≤–∫–∞ .env —Ñ–∞–π–ª–∞**
**–ü—Ä–æ–±–ª–µ–º–∞**: –§–∞–π–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–µ (–Ω–µ UTF-8).

**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ .env –≤ UTF-8 –±–µ–∑ BOM.

---

## üîç **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**

### **1. Development**
```bash
npm run dev
```
–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8080

**–û–∂–∏–¥–∞–µ—Ç—Å—è**:
- –ï—Å–ª–∏ credentials –µ—Å—Ç—å ‚Üí —Ä–µ–∞–ª—å–Ω–∞—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí demo —Ä–µ–∂–∏–º —Å mock –¥–∞–Ω–Ω—ã–º–∏

### **2. Console logs**
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å:

**–£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**:
```
‚úÖ –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω —É—Å–ø–µ—à–Ω–æ
```

**–û—à–∏–±–∫–∞**:
```
‚ùå GigaChat Error: [–∫–æ–¥ –æ—à–∏–±–∫–∏] - [—Å–æ–æ–±—â–µ–Ω–∏–µ]
```

### **3. Network tab**
–í DevTools ‚Üí Network –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ó–∞–ø—Ä–æ—Å –∫ `/api/v2/oauth` ‚Üí —Å—Ç–∞—Ç—É—Å 200 ‚úÖ
- –ó–∞–ø—Ä–æ—Å –∫ `/api/v1/chat/completions` ‚Üí —Å—Ç–∞—Ç—É—Å 200 ‚úÖ

---

## üõ†Ô∏è **Troubleshooting**

### **API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env**:
   ```bash
   cat .env
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä**:
   ```bash
   # Ctrl+C
   npm run dev
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ console**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
   - –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab**:
   - –ö–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è?
   - –ö–∞–∫–∏–µ —Å—Ç–∞—Ç—É—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è?

5. **Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç?**
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ demo —Ä–µ–∂–∏–º ‚Üí credentials –Ω–µ —á–∏—Ç–∞—é—Ç—Å—è
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å API –∏–ª–∏ —Å–µ—Ç—å—é

### **Credentials –Ω–µ —á–∏—Ç–∞—é—Ç—Å—è**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å .env**:
   ```env
   VITE_GIGACHAT_CLIENT_ID=value
   VITE_GIGACHAT_CLIENT_SECRET=value
   ```
   
   ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–≤—ã—á–∫–∏:
   ```env
   VITE_GIGACHAT_CLIENT_ID="value"  # –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É**:
   - UTF-8 –±–µ–∑ BOM
   
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**:
   Vite –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ!

### **–ü–æ–ª—É—á–∞—é 401 Unauthorized**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials –Ω–∞ developers.sber.ru**
2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∏ –∞–∫—Ç–∏–≤–Ω—ã**
3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ credentials**

---

## üìö **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

- [GigaChat API Docs](https://developers.sber.ru/docs/ru/gigachat/api/reference/rest/post-v1-chat-completions)
- [OAuth 2.0](https://developers.sber.ru/docs/ru/gigachat/api/reference/rest/post-v2-oauth)

---

## ‚úÖ **–ò—Ç–æ–≥**

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å**: ‚úÖ **–ù–ê–°–¢–†–û–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢**

- ‚úÖ Credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ .env
- ‚úÖ –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Build —É—Å–ø–µ—à–µ–Ω
- ‚úÖ Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è –î–ª—è production –Ω—É–∂–µ–Ω backend

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –¥–ª—è production**: –°–æ–∑–¥–∞—Ç—å backend –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤ (Node.js/FastAPI)
