# üîß Vite Proxy - —ç—Ç–æ –ù–ï –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä!

## ‚úÖ –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å

**Vite proxy** - —ç—Ç–æ **–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è Vite dev —Å–µ—Ä–≤–µ—Ä–∞**, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä!

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ë–µ–∑ –ø—Ä–æ–∫—Å–∏:
```
–ë—Ä–∞—É–∑–µ—Ä ‚Üí [CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç] ‚Üí GigaChat API ‚ùå
```

### –° Vite proxy:
```
–ë—Ä–∞—É–∑–µ—Ä ‚Üí Vite dev —Å–µ—Ä–≤–µ—Ä (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π proxy) ‚Üí GigaChat API ‚úÖ
         ‚Üë
    –ù–µ—Ç CORS –ø—Ä–æ–≤–µ—Ä–∫–∏, —Ç.–∫. –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –Ω–∞ localhost:8080
```

## üìã –ß—Ç–æ —Ç–∞–∫–æ–µ Vite proxy?

1. **–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ `npm run dev`
2. **–ù–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** - –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
3. **–¢–æ–ª—å–∫–æ –¥–ª—è development** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ `npm run dev`
4. **–†–µ—à–∞–µ—Ç CORS** - –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ localhost, CORS –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å `npm run dev`
- ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É CORS
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –í—Å—ë –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run dev`
2. Vite proxy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
3. –ó–∞–ø—Ä–æ—Å—ã –∫ `/api/gigachat-oauth/*` –±—É–¥—É—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ GigaChat API
4. CORS –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –Ω–∞ `localhost:8080`

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `vite.config.ts`:
```typescript
server: {
  proxy: {
    '/api/gigachat-oauth': {
      target: 'https://ngw.devices.sberbank.ru:9443',
      changeOrigin: true,
      secure: false,
      rewrite: (path) => path.replace(/^\/api\/gigachat-oauth/, ''),
    },
  },
}
```

–í `gigachat.ts`:
```typescript
const GIGACHAT_OAUTH_URL = '/api/gigachat-oauth/api/v2/oauth';
// ‚Üë –≠—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π URL, –æ–Ω –∏–¥–µ—Ç —á–µ—Ä–µ–∑ Vite proxy
```

## üîÑ –î–ª—è production

–í production (–ø–æ—Å–ª–µ `npm run build`):
- Vite proxy **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** (—Ç–æ–ª—å–∫–æ –¥–ª—è dev —Å–µ—Ä–≤–µ—Ä–∞)
- –ù—É–∂–µ–Ω backend proxy (Node.js —Å–µ—Ä–≤–µ—Ä) –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–±

---

**–í—ã–≤–æ–¥:** Vite proxy - —ç—Ç–æ **–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è**, –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä! –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `npm run dev` –∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ
