# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ YooKassa

## üöÄ –ó–∞ 5 –º–∏–Ω—É—Ç

### 1. –ü–æ–ª—É—á–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [yookassa.ru](https://yookassa.ru/)
2. –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **API-–∫–ª—é—á–∏**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **shopId** –∏ **secretKey** (—Ç–µ—Å—Ç–æ–≤—ã–µ, –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `test_`)

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` —Ñ–∞–π–ª

–í `backend/.env` –¥–æ–±–∞–≤—å—Ç–µ:

```env
YOOKASSA_SHOP_ID=123456
YOOKASSA_SECRET_KEY=test_MjIyNjMyNzQzNC0xLVBTVS1OdmVjT...
FRONTEND_URL=http://localhost:8080
PAYMENT_RETURN_URL=http://localhost:8080/payment/success
PAYMENT_FAIL_URL=http://localhost:8080/payment/failed
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

```bash
cd backend
npm run dev
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8080`
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ë–∞–∑–æ–≤—ã–π" - 199 ‚ÇΩ)
4. –ù–∞–∂–º–∏—Ç–µ "–û–ø–ª–∞—Ç–∏—Ç—å"
5. –î–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ YooKassa

---

## üí≥ –¢–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã

**–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã**: `5555555555554444`
**–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è**: `12/25` (–ª—é–±–∞—è –±—É–¥—É—â–∞—è –¥–∞—Ç–∞)
**CVC**: `123` (–ª—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã)
**–ò–º—è**: –õ—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok**:
   ```bash
   # –°–∫–∞—á–∞–π—Ç–µ —Å https://ngrok.com/
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok**:
   ```bash
   ngrok http 3001
   ```

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)

4. **–í YooKassa**:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - URL: `https://abc123.ngrok.io/api/payments/webhook`
   - –°–æ–±—ã—Ç–∏—è: `payment.succeeded`, `payment.canceled`

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] Backend –∑–∞–ø—É—â–µ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ YooKassa —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞)
- [ ] –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –ø—Ä–∏—Ö–æ–¥–∏—Ç (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –±–æ—Ç)

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. [YOOKASSA_TESTING_GUIDE.md](./YOOKASSA_TESTING_GUIDE.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**"–ü–ª–∞—Ç—ë–∂–Ω—ã–π —à–ª—é–∑ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"**
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ `.env`

**Webhook –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç**
‚Üí –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok

**–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è**
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook –≤ YooKassa

