# üîç –ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å GigaChat API –∏ –∑–∞—á–µ–º –Ω—É–∂–µ–Ω backend?

**–î–∞—Ç–∞**: 2025-01-27  
**–¢–µ–º–∞**: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ CORS –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π

---

## ‚ùì **–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã**

1. **–ü–æ—á–µ–º—É –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ GigaChat API?**
2. **–ß—Ç–æ —Ç–∞–∫–æ–µ CORS –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?**
3. **–ü–æ—á–µ–º—É Vite proxy —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ development?**
4. **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω backend –≤ production?**

---

## üåê **–ß—Ç–æ —Ç–∞–∫–æ–µ CORS (Cross-Origin Resource Sharing)?**

### **–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:**

CORS ‚Äî —ç—Ç–æ **—Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞**, –∫–æ—Ç–æ—Ä–∞—è **–±–ª–æ–∫–∏—Ä—É–µ—Ç** –∑–∞–ø—Ä–æ—Å—ã JavaScript –∫ –¥—Ä—É–≥–∏–º –¥–æ–º–µ–Ω–∞–º, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —è–≤–Ω–æ –Ω–µ —Ä–∞–∑—Ä–µ—à–∏–ª —Ç–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã.

### **–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**

```
–í–∞—à —Å–∞–π—Ç:        http://localhost:8080 (–∏–ª–∏ –≤–∞—à-—Å–∞–π—Ç.com)
GigaChat API:    https://ngw.devices.sberbank.ru:9443

‚ùå –ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å!
```

**–ü–æ—á–µ–º—É?** –ë—Ä–∞—É–∑–µ—Ä –≤–∏–¥–∏—Ç, —á—Ç–æ:
- Origin —Ä–∞–∑–Ω—ã–π (localhost vs ngw.devices.sberbank.ru)
- –ü—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞–∑–Ω—ã–π (http vs https)
- –ü–æ—Ä—Ç —Ä–∞–∑–Ω—ã–π (8080 vs 9443)

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ:**

1. **Preflight –∑–∞–ø—Ä–æ—Å** (OPTIONS):
   ```
   –ë—Ä–∞—É–∑–µ—Ä ‚Üí GigaChat API:
   OPTIONS /api/v2/oauth HTTP/1.1
   Origin: http://localhost:8080
   Access-Control-Request-Method: POST
   ```

2. **–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞** (–±–µ–∑ CORS –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤):
   ```
   GigaChat API ‚Üí –ë—Ä–∞—É–∑–µ—Ä:
   HTTP/1.1 200 OK
   (–Ω–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ Access-Control-Allow-Origin)
   ```

3. **–ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç** –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å:
   ```
   ‚ùå Access to fetch blocked by CORS policy:
      No 'Access-Control-Allow-Origin' header is present
   ```

---

## üõ°Ô∏è **–ü–æ—á–µ–º—É GigaChat API –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞?**

### **–ü—Ä–∏—á–∏–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

1. **–ó–∞—â–∏—Ç–∞ API –∫–ª—é—á–µ–π** üîê
   - –ï—Å–ª–∏ API –∫–ª—é—á–∏ –≤–∏–¥–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∏—Ö –º–æ–∂–µ—Ç —É–∫—Ä–∞—Å—Ç—å –∫—Ç–æ —É–≥–æ–¥–Ω–æ
   - –õ—é–±–æ–π –º–æ–∂–µ—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Client ID –∏ Client Secret –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
   - –≠—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤–∞—à–µ–≥–æ API –ª–∏–º–∏—Ç–∞

2. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞** üö´
   - GigaChat —Ö–æ—á–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, –∫—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö API
   - –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ—â–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å
   - –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –≤–∑–ª–æ–º–∞–Ω—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º–∏

3. **–ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π** ‚ö†Ô∏è
   - –°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å rate limiting –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
   - –õ–µ–≥—á–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã

---

## üîß **–ü–æ—á–µ–º—É Vite proxy —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ development?**

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Vite proxy:**

```
–ë—Ä–∞—É–∑–µ—Ä ‚Üí Vite Dev Server ‚Üí GigaChat API
         (localhost:8080)    (ngw.devices.sberbank.ru)
            ‚úÖ –°–ë–û–ö       ‚ùå –ë–õ–û–ö–ò–†–£–ï–¢–°–Ø
```

**–í development:**
1. –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ `localhost:8080/api/gigachat-oauth/...`
2. Vite dev server –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å (—Å —Ç–æ–≥–æ –∂–µ origin!)
3. Vite server –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ GigaChat API –æ—Ç —Å–≤–æ–µ–≥–æ –∏–º–µ–Ω–∏
4. GigaChat API –æ—Ç–≤–µ—á–∞–µ—Ç Vite server (—Å–µ—Ä–≤–µ—Ä-–∫-—Å–µ—Ä–≤–µ—Ä—É, –±–µ–∑ CORS!)
5. Vite server –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –±—Ä–∞—É–∑–µ—Ä—É

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ó–∞–ø—Ä–æ—Å –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–¥–µ—Ç –∫ **—Å–≤–æ–µ–º—É** —Å–µ—Ä–≤–µ—Ä—É (localhost)
- ‚úÖ CORS –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ origin
- ‚úÖ Vite server (Node.js) –Ω–µ –ø–æ–¥—á–∏–Ω—è–µ—Ç—Å—è –ø–æ–ª–∏—Ç–∏–∫–µ CORS

### **–°—Ö–µ–º–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ë—Ä–∞—É–∑–µ—Ä   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Vite Server  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  GigaChat API    ‚îÇ
‚îÇ localhost:  ‚îÇ  ‚úÖ     ‚îÇ  (Node.js)   ‚îÇ  ‚úÖ     ‚îÇ  (ngw.devices)   ‚îÇ
‚îÇ    8080     ‚îÇ  –ù–ï–¢    ‚îÇ  localhost:  ‚îÇ  –ù–ï–¢    ‚îÇ       :9443      ‚îÇ
‚îÇ             ‚îÇ  CORS   ‚îÇ    8080      ‚îÇ  CORS   ‚îÇ                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     (JS)                    (Backend)                (External API)
```

---

## ‚ö†Ô∏è **–ü–æ—á–µ–º—É Vite proxy –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production?**

### **–ü—Ä–æ–±–ª–µ–º–∞:**

–ö–æ–≥–¥–∞ –≤—ã –¥–µ–ª–∞–µ—Ç–µ `npm run build`, Vite —Å–æ–∑–¥–∞–µ—Ç **—Å—Ç–∞—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã** (HTML, CSS, JS):
- ‚úÖ –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω—ã –Ω–∞ –ª—é–±–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ
- ‚úÖ –ù–æ –æ–Ω–∏ **–ù–ï –≤–∫–ª—é—á–∞—é—Ç** dev server —Å proxy
- ‚úÖ Proxy –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ `vite.config.ts` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –∫ `npm run dev`

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ production:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ë—Ä–∞—É–∑–µ—Ä   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  GigaChat API    ‚îÇ
‚îÇ  (–≤–∞—à —Å–∞–π—Ç) ‚îÇ  ‚ùå CORS –ë–õ–û–ö–ò–†–£–ï–¢            ‚îÇ  (ngw.devices)   ‚îÇ
‚îÇ             ‚îÇ                               ‚îÇ       :9443      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. –ù–µ—Ç Vite dev server –≤ production
2. –°—Ç–∞—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—ã—Ç–∞—é—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ GigaChat
3. CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
4. API –∫–ª—é—á–∏ –≤–∏–¥–Ω—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ (–≤ bundle.js)

---

## üöÄ **–†–µ—à–µ–Ω–∏–µ: Backend Proxy**

### **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω backend?**

Backend —Å–µ—Ä–≤–µ—Ä **–≤—Å–µ–≥–¥–∞** —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –º–æ–∂–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ë—Ä–∞—É–∑–µ—Ä   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Backend API  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  GigaChat API    ‚îÇ
‚îÇ  (–≤–∞—à —Å–∞–π—Ç) ‚îÇ    ‚îÇ  (–≤–∞—à –¥–æ–º–µ–Ω) ‚îÇ    ‚îÇ  (ngw.devices)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚úÖ CORS          ‚úÖ –ù–ï–¢ CORS          ‚úÖ –ù–ï–¢ CORS
```

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ backend:**

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** üîê
   - API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –ù–µ –≤–∏–¥–Ω—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ –±—Ä–∞—É–∑–µ—Ä–∞
   - –ù–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É–∫—Ä–∞–¥–µ–Ω—ã

2. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞** üéØ
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - Rate limiting –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

3. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** üí™
   - –í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ú–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã
   - –ú–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏

---

## üìã **–ü—Ä–∏–º–µ—Ä—ã backend —Ä–µ—à–µ–Ω–∏–π**

### **1. Node.js/Express:**

```javascript
// server.js
const express = require('express');
const cors = require('cors');
const fetch = require('node-fetch');

const app = express();
app.use(cors());

// Proxy –¥–ª—è OAuth
app.post('/api/gigachat-oauth/*', async (req, res) => {
  const response = await fetch('https://ngw.devices.sberbank.ru:9443/api/v2/oauth', {
    method: 'POST',
    headers: {
      ...req.headers,
      'Authorization': req.headers.authorization,
    },
    body: req.body,
  });
  const data = await response.json();
  res.json(data);
});

// Proxy –¥–ª—è API
app.post('/api/gigachat-api/*', async (req, res) => {
  const response = await fetch('https://gigachat.devices.sberbank.ru/api/v1/chat/completions', {
    method: 'POST',
    headers: {
      ...req.headers,
      'Authorization': req.headers.authorization,
    },
    body: JSON.stringify(req.body),
  });
  const data = await response.json();
  res.json(data);
});

app.listen(3000);
```

### **2. Python/FastAPI:**

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
import httpx

app = FastAPI()

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_methods=["*"],
)

@app.post("/api/gigachat-oauth/{path:path}")
async def proxy_oauth(path: str, request: Request):
    async with httpx.AsyncClient() as client:
        response = await client.post(
            f"https://ngw.devices.sberbank.ru:9443/api/v2/{path}",
            headers=dict(request.headers),
            content=await request.body()
        )
        return response.json()
```

### **3. Serverless (Vercel/Netlify):**

```javascript
// vercel.json
{
  "functions": {
    "api/gigachat-oauth.js": {
      "memory": 1024
    }
  }
}

// api/gigachat-oauth.js
export default async function handler(req, res) {
  const response = await fetch('https://ngw.devices.sberbank.ru:9443/api/v2/oauth', {
    method: 'POST',
    headers: req.headers,
    body: req.body,
  });
  const data = await response.json();
  res.json(data);
}
```

---

## üìä **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤**

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å | Vite Proxy | Backend Proxy |
|----------|---------------|------------|---------------|
| **Development** | ‚ùå CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **Production** | ‚ùå CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | ‚ùå –ö–ª—é—á–∏ –≤–∏–¥–Ω—ã | ‚ö†Ô∏è –ö–ª—é—á–∏ –≤–∏–¥–Ω—ã | ‚úÖ –ö–ª—é—á–∏ —Å–∫—Ä—ã—Ç—ã |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | ‚úÖ –ü—Ä–æ—Å—Ç–æ | ‚úÖ –ü—Ä–æ—Å—Ç–æ | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç backend |

---

## ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

### **–î–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**

1. **Development** (—Å–µ–π—á–∞—Å):
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º Vite proxy
   - ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º dev server –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ

2. **Production** (–Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å):
   - ‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å backend API
   - ‚ö†Ô∏è –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ API –∫–ª—é—á–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å proxy endpoints
   - ‚ö†Ô∏è –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è backend API

### **–í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è:**

1. **–°—Ç–∞—Ç–∏—á–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥** (Vercel, Netlify):
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Serverless Functions
   - –ö–ª—é—á–∏ –≤ environment variables —Ö–æ—Å—Ç–∏–Ω–≥–∞

2. **–°–≤–æ–π —Å–µ—Ä–≤–µ—Ä** (VPS, Cloud):
   - –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Node.js/Python backend
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx –∫–∞–∫ reverse proxy

3. **Backend as a Service** (Railway, Render):
   - –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π backend —Å–µ—Ä–≤–∏—Å
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ frontend —á–µ—Ä–µ–∑ API

---

## üéØ **–ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:**

### **1. –ü–æ—á–µ–º—É –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã?**

–ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ GigaChat API –∏–∑-–∑–∞ **–ø–æ–ª–∏—Ç–∏–∫–∏ CORS**. GigaChat API –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Access-Control-Allow-Origin`, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤.

### **2. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω backend?**

Backend –Ω—É–∂–µ–Ω –¥–ª—è:
- ‚úÖ **–û–±—Ö–æ–¥–∞ CORS** ‚Äî —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è –ø–æ–ª–∏—Ç–∏–∫–µ CORS
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** ‚Äî API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∞ –Ω–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç–∏** ‚Äî –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å

### **3. –ü–æ—á–µ–º—É Vite proxy –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production?**

Vite proxy —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ `npm run dev` (development server). –í production —Å—Ç–∞—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–µ –≤–∫–ª—é—á–∞—é—Ç dev server, –ø–æ—ç—Ç–æ–º—É proxy –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

### **4. –ú–æ–∂–Ω–æ –ª–∏ –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ backend?**

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –º–æ–∂–Ω–æ**, –Ω–æ **–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**:
- ‚ùå API –∫–ª—é—á–∏ –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ
- ‚ùå –†–∏—Å–∫ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∏ –≤–∑–ª–æ–º–∞
- ‚ùå CORS –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –î–ª—è –¥–µ–º–æ/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CORS —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ (–Ω–µ –¥–ª—è production!)

---

## üìö **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã**

- [MDN: CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)
- [Vite: Server Proxy](https://vitejs.dev/config/server-options.html#server-proxy)
- [GigaChat API Documentation](https://developers.sber.ru/gigachat)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-01-27  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
