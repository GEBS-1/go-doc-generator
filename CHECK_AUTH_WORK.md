# Как проверить работу авторизации

## После авторизации через Telegram виджет:

### 1. Проверьте запись в БД:
```bash
node check-db-connection.cjs
```

Должен появиться новый пользователь с вашим Telegram ID.

### 2. Проверьте в браузере:
- Откройте консоль (F12) → вкладка Console
- Должны быть логи: `[TelegramLoginButton] Инициализация виджета...`
- После авторизации должен быть вызов `handleTelegramAuth`

### 3. Проверьте в интерфейсе:
- После авторизации должно появиться ваше имя в Header
- Должна исчезнуть кнопка "Войти"
- Должен появиться аватар/имя пользователя

### 4. Проверьте команды бота:
- Откройте бота в Telegram: @PrePromo_bot
- Отправьте `/start`
- Должно прийти приветствие
- Отправьте `/subscription` - должен показать статус подписки

## Если ничего не работает:

1. **Виджет не появляется:**
   - Проверьте консоль браузера на ошибки
   - Убедитесь, что домен добавлен в BotFather
   - Проверьте, что `VITE_TELEGRAM_BOT_USERNAME=PrePromo_bot` в .env

2. **Виджет появляется, но не открывается Telegram:**
   - Проверьте, что домен правильно добавлен в BotFather
   - Попробуйте другой браузер
   - Проверьте, что бот активен

3. **Авторизация проходит, но данные не сохраняются:**
   - Проверьте логи backend (должны быть в терминале где запущен `npm start`)
   - Проверьте подключение к БД: `node check-db-connection.cjs`
   - Проверьте, что backend запущен на http://localhost:3001

4. **Ошибки в консоли:**
   - Скопируйте ошибки из консоли браузера
   - Проверьте Network tab - есть ли запросы к `/api/auth/telegram`
   - Проверьте статус ответа (должен быть 200)

## Быстрая проверка:

```bash
# 1. Проверить БД
node check-db-connection.cjs

# 2. Проверить backend
curl http://localhost:3001/health

# 3. Проверить переменные
Get-Content .env | Select-String "TELEGRAM"
```

